
import { _decorator, Component, Node, Vec3 } from 'cc';
import EventManager from '../utils/eventManager';
import { copyVec3Array } from '../utils/util';
const { ccclass, property } = _decorator;

@ccclass('FishPathes')
export class FishPathes extends Component {
    @property
    first: number = 0;

    @property
    end: number = 0;
    private _pathes: Vec3[][] = [];

    onLoad() {
        this.generatePaths();
    }
    generatePaths() {
        for (let i = this.first; i <= this.end; i++) {
            let node: Node = this.node.children[i];
            this._pathes[i - this.first] = [];
            for (let j = 0; j < node.children.length; j++) {
                let child: Node = node.children[j];
                this._pathes[i - this.first].push(child.getPosition());
            }
        }
    }

    /**
     * 获取路径数据
     * @method getPath
     */
    public getPath(idx?: number): Vec3[] {
        // idx = 13;
        let random: number = Math.floor(Math.random() * this._pathes.length);
        if (idx >= 0) {
            random = idx;
        }
        let path = this._pathes[random];
        // return path;

        let pp = copyVec3Array(path);
        let rand = Math.random();
        let result: Vec3[] = [];
        if (rand < 0.25) {
            //x轴翻转
            for (let j = 0; j < pp.length; j++) {
                pp[j].x *= -1;
                result.push(pp[j]);
            }
        }
        else if (rand >= 0.25 && rand < 0.5) {
            //y轴翻转
            pp = copyVec3Array(path);
            for (let j = 0; j < pp.length; j++) {
                pp[j].y *= -1;
                result.push(pp[j]);
            }
        }
        else if (rand >= 0.5 && rand < 0.75) {
            //倒序
            pp = copyVec3Array(path);
            result = pp.reverse();
        }
        else {
            result = path;
        }
        return result;
    }

    onDisable() {
    }

}


















/*

[[{"x":-718.044,"y":271.628,"z":0},{"x":-663.753,"y":258.745,"z":0},{"x":-613.612,"y":244.89,"z":0},{"x":-549.616,"y":223.118,"z":0},{"x":-488.259,"y":195.408,"z":0},{"x":-432.18,"y":158.462,"z":0},{"x":-375.441,"y":123.495,"z":0},{"x":-310.108,"y":77.486,"z":0},{"x":-230.972,"y":40.678,"z":0},{"x":-132.512,"y":16.753,"z":0},{"x":-22.293,"y":1.926,"z":0},{"x":81.493,"y":2.233,"z":0},{"x":169.488,"y":-4.247,"z":0},{"x":235.488,"y":-32.247,"z":0},{"x":316.488,"y":-78.247,"z":0},{"x":386.488,"y":-113.247,"z":0},{"x":442.488,"y":-152.247,"z":0},{"x":500.488,"y":-193.247,"z":0},{"x":576.156,"y":-239.186,"z":0},{"x":641.36,"y":-292.436,"z":0},{"x":725.039,"y":-304.39,"z":0}],[{"x":-709.777,"y":-74.195,"z":0},{"x":-673.201,"y":-110.698,"z":0},{"x":-613.612,"y":-155.259,"z":0},{"x":-549.616,"y":-177.031,"z":0},{"x":-459.915,"y":-169.311,"z":0},{"x":-374.311,"y":-124.768,"z":0},{"x":-332.925,"y":-86.514,"z":0},{"x":-293.574,"y":-47.492,"z":0},{"x":-242.782,"y":-7.743,"z":0},{"x":-160.856,"y":16.753,"z":0},{"x":-75.438,"y":47.985,"z":0},{"x":17.719,"y":74.274,"z":0},{"x":80.914,"y":93.775,"z":0},{"x":145.488,"y":123.753,"z":0},{"x":211.488,"y":158.753,"z":0},{"x":265.488,"y":198.753,"z":0},{"x":318.488,"y":246.753,"z":0},{"x":365.488,"y":291.753,"z":0},{"x":415.156,"y":342.814,"z":0},{"x":466.36,"y":400.564,"z":0}],[{"x":-490.687,"y":433.809,"z":0},{"x":-413.66,"y":369.392,"z":0},{"x":-363.519,"y":355.537,"z":0},{"x":-299.523,"y":333.765,"z":0},{"x":-238.166,"y":306.055,"z":0},{"x":-182.087,"y":269.109,"z":0},{"x":-125.348,"y":234.142,"z":0},{"x":-60.015,"y":188.133,"z":0},{"x":19.121,"y":151.325,"z":0},{"x":117.581,"y":127.4,"z":0},{"x":227.8,"y":112.573,"z":0},{"x":331.586,"y":112.88,"z":0},{"x":419.581,"y":106.4,"z":0},{"x":485.581,"y":78.4,"z":0},{"x":566.581,"y":32.4,"z":0},{"x":636.581,"y":-2.6,"z":0},{"x":746.907,"y":-73.487,"z":0}],[{"x":-616.252,"y":409.81,"z":0},{"x":-502.614,"y":324.135,"z":0},{"x":-434.758,"y":284.298,"z":0},{"x":-370.762,"y":262.526,"z":0},{"x":-286.966,"y":266.703,"z":0},{"x":-220.258,"y":230.938,"z":0},{"x":-196.587,"y":162.903,"z":0},{"x":-131.254,"y":116.894,"z":0},{"x":-52.118,"y":80.086,"z":0},{"x":46.342,"y":56.161,"z":0},{"x":156.561,"y":41.334,"z":0},{"x":253.906,"y":25.078,"z":0},{"x":337.3,"y":2.954,"z":0},{"x":408.279,"y":-30.732,"z":0},{"x":481.701,"y":-70.669,"z":0},{"x":592.625,"y":-128.405,"z":0},{"x":737.813,"y":-194.745,"z":0}],[{"x":-723.648,"y":238.256,"z":0},{"x":-591.878,"y":187.45,"z":0},{"x":-486.364,"y":151.797,"z":0},{"x":-422.368,"y":130.025,"z":0},{"x":-373.441,"y":81.202,"z":0},{"x":-313.864,"y":45.437,"z":0},{"x":-248.193,"y":30.402,"z":0},{"x":-163.86,"y":8.393,"z":0},{"x":-86.724,"y":-12.415,"z":0},{"x":0.736,"y":-36.34,"z":0},{"x":97.955,"y":-75.167,"z":0},{"x":202.3,"y":-107.423,"z":0},{"x":285.694,"y":-129.547,"z":0},{"x":356.673,"y":-163.233,"z":0},{"x":430.095,"y":-203.17,"z":0},{"x":541.019,"y":-260.906,"z":0},{"x":686.207,"y":-327.246,"z":0}],[{"x":-835.227,"y":79.255,"z":0},{"x":-703.457,"y":28.449,"z":0},{"x":-597.943,"y":-7.204,"z":0},{"x":-533.947,"y":-28.976,"z":0},{"x":-485.02,"y":-77.799,"z":0},{"x":-425.443,"y":-113.564,"z":0},{"x":-359.772,"y":-128.599,"z":0},{"x":-275.439,"y":-150.608,"z":0},{"x":-198.303,"y":-171.416,"z":0},{"x":-110.843,"y":-195.341,"z":0},{"x":-13.624,"y":-234.168,"z":0},{"x":90.721,"y":-266.424,"z":0},{"x":174.115,"y":-288.548,"z":0},{"x":245.094,"y":-322.234,"z":0},{"x":318.516,"y":-362.171,"z":0},{"x":429.44,"y":-419.907,"z":0},{"x":574.628,"y":-486.247,"z":0}],[{"x":-745.048,"y":-218.092,"z":0},{"x":-642.909,"y":-246.866,"z":0},{"x":-559.523,"y":-252.09,"z":0},{"x":-462.542,"y":-253.909,"z":0},{"x":-363.532,"y":-242.577,"z":0},{"x":-295.261,"y":-244.653,"z":0},{"x":-218.722,"y":-248.821,"z":0},{"x":-144.17,"y":-238.228,"z":0},{"x":-67.034,"y":-259.036,"z":0},{"x":20.426,"y":-282.961,"z":0},{"x":127.912,"y":-262.75,"z":0},{"x":238.675,"y":-243.669,"z":0},{"x":348.665,"y":-243.565,"z":0},{"x":449.628,"y":-258.52,"z":0},{"x":547.424,"y":-285.623,"z":0},{"x":645.415,"y":-316.297,"z":0},{"x":766.218,"y":-363.385,"z":0}],[{"x":-755.658,"y":-93.803,"z":0},{"x":-653.519,"y":-122.577,"z":0},{"x":-570.133,"y":-127.801,"z":0},{"x":-473.152,"y":-129.62,"z":0},{"x":-374.142,"y":-118.288,"z":0},{"x":-305.871,"y":-120.364,"z":0},{"x":-229.332,"y":-124.532,"z":0},{"x":-154.78,"y":-113.939,"z":0},{"x":-77.644,"y":-134.747,"z":0},{"x":9.816,"y":-158.672,"z":0},{"x":117.302,"y":-138.461,"z":0},{"x":228.065,"y":-119.38,"z":0},{"x":338.055,"y":-119.276,"z":0},{"x":439.018,"y":-134.231,"z":0},{"x":536.814,"y":-161.334,"z":0},{"x":634.805,"y":-192.008,"z":0},{"x":755.608,"y":-239.096,"z":0}],[{"x":-755.658,"y":59.284,"z":0},{"x":-653.519,"y":30.51,"z":0},{"x":-570.133,"y":25.286,"z":0},{"x":-473.152,"y":23.467,"z":0},{"x":-374.142,"y":34.799,"z":0},{"x":-305.871,"y":32.723,"z":0},{"x":-229.332,"y":28.555,"z":0},{"x":-154.78,"y":39.148,"z":0},{"x":-77.644,"y":18.34,"z":0},{"x":9.816,"y":-5.585,"z":0},{"x":117.302,"y":14.626,"z":0},{"x":228.065,"y":33.707,"z":0},{"x":338.055,"y":33.811,"z":0},{"x":439.018,"y":18.856,"z":0},{"x":536.814,"y":-8.247,"z":0},{"x":634.805,"y":-38.921,"z":0},{"x":755.608,"y":-86.009,"z":0}],[{"x":-755.658,"y":248.749,"z":0},{"x":-653.519,"y":219.975,"z":0},{"x":-570.133,"y":214.751,"z":0},{"x":-473.152,"y":212.932,"z":0},{"x":-374.142,"y":224.264,"z":0},{"x":-305.871,"y":222.188,"z":0},{"x":-229.332,"y":218.02,"z":0},{"x":-154.78,"y":228.613,"z":0},{"x":-77.644,"y":207.805,"z":0},{"x":9.816,"y":183.88,"z":0},{"x":117.302,"y":204.091,"z":0},{"x":228.065,"y":223.172,"z":0},{"x":338.055,"y":223.276,"z":0},{"x":439.018,"y":208.321,"z":0},{"x":536.814,"y":181.218,"z":0},{"x":634.805,"y":150.544,"z":0},{"x":755.608,"y":103.456,"z":0}],[{"x":-755.658,"y":248.749,"z":0},{"x":-653.519,"y":219.975,"z":0},{"x":-570.133,"y":214.751,"z":0},{"x":-473.152,"y":212.932,"z":0},{"x":-374.142,"y":224.264,"z":0},{"x":-305.871,"y":222.188,"z":0},{"x":-229.332,"y":218.02,"z":0},{"x":-154.78,"y":228.613,"z":0},{"x":-77.644,"y":207.805,"z":0},{"x":9.816,"y":183.88,"z":0},{"x":117.302,"y":204.091,"z":0},{"x":228.065,"y":223.172,"z":0},{"x":338.055,"y":223.276,"z":0},{"x":439.018,"y":208.321,"z":0},{"x":536.814,"y":181.218,"z":0},{"x":634.805,"y":150.544,"z":0},{"x":755.608,"y":103.456,"z":0}],[{"x":-503.209,"y":438.434,"z":0},{"x":-500.097,"y":348.291,"z":0},{"x":-497.606,"y":267.751,"z":0},{"x":-482.915,"y":198.985,"z":0},{"x":-453.142,"y":141.264,"z":0},{"x":-402.871,"y":28.188,"z":0},{"x":-425.332,"y":85.02,"z":0},{"x":-377.78,"y":-28.387,"z":0},{"x":-368.168,"y":-81.538,"z":0},{"x":-370.464,"y":-143.255,"z":0},{"x":-373.991,"y":-202.17,"z":0},{"x":-382.508,"y":-282.293,"z":0},{"x":-403.608,"y":-344.781,"z":0},{"x":-418.383,"y":-412.881,"z":0}],[{"x":-239.474,"y":438.434,"z":0},{"x":-236.362,"y":348.291,"z":0},{"x":-192.536,"y":284.285,"z":0},{"x":-176.664,"y":224.967,"z":0},{"x":-197.674,"y":153.074,"z":0},{"x":-209.996,"y":37.636,"z":0},{"x":-206.475,"y":95.649,"z":0},{"x":-206.162,"y":-15.396,"z":0},{"x":-205.998,"y":-70.909,"z":0},{"x":-198.846,"y":-130.264,"z":0},{"x":-196.468,"y":-189.179,"z":0},{"x":-184.909,"y":-245.682,"z":0},{"x":-168.217,"y":-316.437,"z":0},{"x":-127.485,"y":-405.795,"z":0}],[{"x":22.706,"y":438.434,"z":0},{"x":25.818,"y":348.291,"z":0},{"x":33.033,"y":284.285,"z":0},{"x":58.353,"y":224.967,"z":0},{"x":81.04,"y":153.074,"z":0},{"x":133.672,"y":37.636,"z":0},{"x":106.488,"y":95.649,"z":0},{"x":161.126,"y":-15.396,"z":0},{"x":153.988,"y":-71.996,"z":0},{"x":136.145,"y":-124.83,"z":0},{"x":115.702,"y":-172.878,"z":0},{"x":89.225,"y":-219.6,"z":0},{"x":82.009,"y":-289.269,"z":0},{"x":119.481,"y":-398.188,"z":0}],[{"x":386.733,"y":438.434,"z":0},{"x":389.845,"y":348.291,"z":0},{"x":397.06,"y":284.285,"z":0},{"x":422.38,"y":224.967,"z":0},{"x":445.067,"y":153.074,"z":0},{"x":497.699,"y":37.636,"z":0},{"x":470.515,"y":95.649,"z":0},{"x":525.153,"y":-15.396,"z":0},{"x":518.015,"y":-71.996,"z":0},{"x":500.172,"y":-124.83,"z":0},{"x":479.729,"y":-172.878,"z":0},{"x":453.252,"y":-219.6,"z":0},{"x":446.036,"y":-289.269,"z":0},{"x":483.508,"y":-398.188,"z":0}]]

*/